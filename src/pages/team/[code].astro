---
import { getImage, Image } from 'astro:assets'
import { MarkdownInstance, ImageMetadata } from 'astro'
import Layout from '@layouts/Layout.astro'
import SocialMediaPost from '@components/team/SocialMediaPost.astro'
import Section from '@components/team/Section.astro'
import SimpleSection from '@components/team/SimpleSection.astro'
import GreetingSection from '@components/team/GreetingSection.astro'
import QuoteSection from '@components/team/QuoteSection.astro'
import LatestBlogsSection from '@components/team/LatestBlogsSection.astro'
import ResourceCollectionSection from '@components/team/ResourceCollectionSection.astro'
import ContactSection from '@components/team/ContactSection.astro'
import ResourceItem from '@components/team/ResourceItem.astro'
import { Person } from '@utils/types'
import DraftBanner from '@components/DraftBanner'
import { InvertedGithubIcon, LinkedInIcon, TwitterIcon, EmailIcon } from '@components/Icons'

const isDev = import.meta.env.DEV;

export async function getStaticPaths() {
  const people = await Astro.glob<MarkdownInstance<Person>>(
    '../../data/people/{*.mdx,*.md}'
  )

  // TODO: Replace w/ `import.meta.env.DEV`
  const isDev = true;

  return people
    .map(({ frontmatter, Content }) => ({
      params: { code: frontmatter.code },
      props: { ...frontmatter, Content: Content }
    }))
}

const {
  expertDraft,
  name,
  lastName,
  code,
  jobTitle,

  expertise,
  aboutMe,
  quote,
  previousWorks,

  phone,
  twitter,
  linkedin,
  github,
  email,
  fullName,

  Content
} = Astro.props

// TODO: Error on required properties?
// - fullName, jobTitle, expertise
---

<Layout navbar title={fullName + " - " + jobTitle}>
    <DraftBanner draft={expertDraft} pageName='profile' />
    <div class='bg-zinc-900 text-white text-xs overflow-x-hidden'>

      <GreetingSection fullName={fullName} code={code} jobTitle={jobTitle}>
	<h2 class="py-5 text-3xl font-medium">Expert In</h2>
	<ul class="list-disc list-inside text-lg font-medium">
	  <li>Web Standards</li>
	  <li>API Security</li>
	  <li>Databases</li>
	  <li>Clojure Development</li>
	</ul>
      </GreetingSection>

      <SimpleSection>
          <div>
            <h2 class="text-xl font-medium">Notable Accomplishments:</h2>
          </div>

          <div class="col-start-2 row-start-2">
	    <h2 class="text-xl font-medium">Why {name}?</h2>
	    <ul class="list-disc list-inside">
	    </ul>
	  </div>
      </SimpleSection>

      <QuoteSection author="Albert Einstein">
	God does not play dice with the Universe
      </QuoteSection>

      <LatestBlogsSection code={code}>
      </LatestBlogsSection>

      <ResourceCollectionSection title="Notable Works" subtitle="From the web">
	<ResourceItem name="reap" description="A regex and parsing Clojure library" link="https://github.com/juxt/reap"/>
      </ResourceCollectionSection>

      <ContactSection {...Astro.props}>
      </ContactSection>

    </div>
</Layout>
