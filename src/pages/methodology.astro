---
import { getImage } from '@astrojs/image'
import { Image } from '@astrojs/image/components'
import { MarkdownInstance } from 'astro'
import Banner from '../components/Banner.astro'
import { BlogCard } from '../components/BlogCard'
import Clickable from '../components/Clickable.astro'
import { ChevronRightIcon, QuoteIcon, TickIcon } from '../components/Icons'
import Section from '../components/Section.astro'
import CaseStudy, { CaseStudyProps } from '../layouts/CaseStudy.astro'
import Layout from '../layouts/Layout.astro'
import { Person, Blog } from '../components/types'

const url = Astro.url

const caseStudies = await Astro.glob<CaseStudyProps>(
  '../data/case-studies/*.md'
)

const caseStudiesParsed = caseStudies
  .filter(({ frontmatter }) => frontmatter.pages[url.pathname])
  .sort(
    (a, b) =>
      a.frontmatter.pages[url.pathname].weight -
      b.frontmatter.pages[url.pathname].weight
  )

const homepageBannerPicture = await getImage({
  src: import('../assets/site/homepage-banner.jpeg'),
  width: 1500,
  height: 1000,
  quality: 80
}).then((img) => img.src)

const threadsPicture = await getImage({
  src: import('../assets/site/threads.png'),
  width: 600,
  height: 1366,
  quality: 80
}).then((img) => img.src)

const testimonials = [
  {
    name: 'MORGAN ROSS, TECHNICAL DIRECTOR, ONTHEMARKET PLC',
    quote:
      'JUXT led the development team through this period of incredible achievements.',
    bg: 'bg-red-600'
  },
  {
    name: 'MANAGING DIRECTOR, T1 INVESTMENT BANK',
    quote:
      'The JUXT team are tremendously technically capable – delivering elegant solutions to complex problems.',
    bg: 'bg-green-800'
  },
  {
    name: 'ANDY DWELLEY',
    quote: 'XTDB has been an absolute dream to use.',
    bg: 'bg-slate-800'
  },
  {
    name: 'PATRICK GALVIN',
    quote: 'XTDB has been working great for me. It is a lovely lovely project.',
    bg: 'bg-blue-800'
  },
  {
    name: 'JULIAN GAMBLE',
    quote:
      'JUXT have made a huge contribution to the Open Source and Clojure community',
    bg: 'bg-pink-800'
  },
  {
    name: 'NIC FERRIER',
    quote:
      'They are programmers employing programmers to do work with the best tools in the most interesting ways.',
    bg: 'bg-violet-800'
  },
  {
    name: "JACOB O'BRYANT",
    quote:
      'I really appreciate the straightforward simplicity of schemaless persistence. With XTDB it was just so easy.',
    bg: 'bg-gray-800'
  }
]

const clientLogos = [
  'credit-suisse.svg',
  'citi.svg',
  'vodafone.svg',
  'on-the-market.svg',
  'mail-online.svg',
  'bbc.svg'
]

const blogs = await Astro.glob<MarkdownInstance<Blog>>('./blog/{*.md,*.mdx}')

const isDev = import.meta.env.DEV

const people = await Astro.glob<MarkdownInstance<Person>>(
  '../data/people/{*.mdx,*.md}'
)

const peopleByCode = new Map(
  people.map((person) => [person.frontmatter.code, person.frontmatter])
)

const unfilteredBlogs = await Promise.all(
  blogs.map((page) => {
    const author = page.frontmatter.author
    const person = peopleByCode.get(author)
    const expert = (isDev || !person?.expertDraft) && person?.expert
    if (!person)
      throw new Error(
        `No person found for author: '${author}' in '${page.url}'`
      )
    const permalink = page.file.split('/').slice(-1)[0].split('.')[0]
    const parsedImage = person.image.split('.').slice(0, -1)

    return new Promise<Blog>((res, rej) => {
      getImage({
        src: import(`../assets/people/${parsedImage}.jpg`),
        width: 200,
        height: 200,
        quality: 80
      })
        .then((image) => {
          res({
            ...page.frontmatter,
            href: permalink,
            person: {
              ...person,
              expert,
              image: image.src
            }
          })
        })
        .catch(rej)
    })
  })
)
const featuredBlogs = unfilteredBlogs
  .filter(({ featured, draft }) => featured && (isDev || !draft))
  .sort((a, b) => b.featured.weight - a.featured.weight)
---

<Layout title='JUXT' navbar>
  <main>
    <Section
      style={{
        backgroundImage: `url(${threadsPicture})`
      }}
      className={'bg-slate-900 bg-[length:0px_0px] md:bg-no-repeat md:bg-right md:bg-contain py-20 text-white'}
    >
      <div class='md:w-1/2'>
        <h2 class='text-4xl pb-10 font-bold'>Our Approach</h2>
        <div class='text-lg font-extralight flex flex-col gap-8'>
          <p class=''>
            Complexity, still the primary cause of failure and delay of IT
            projects, arises from the <span class='italic'>
              interaction of concerns.
            </span>
          </p>
          <p class=''>
            The fundamental concerns in IT systems are
            <span class='font-bold text-juxt'>code</span>,
            <span class='font-bold text-juxt'>form</span>,
            <span class='font-bold text-juxt'>data</span>, and
            <span class='font-bold text-juxt'>time</span>
             — their subtle interactions and couplings combine to have a suffocating
            impact on software projects.
          </p>
          <p class=''>
            Our approach to building IT systems is defined by a unique
            methodology and a set of supporting tools that allow us to keep
            these four concerns separate, resulting in:
          </p>
          <div class='flex flex-col gap-6'>
            <div class='flex gap-4 items-center'>
              <div class='bg-gray-800 w-6 h-6 shrink-0 border border-juxt'>
                <TickIcon className={'fill-white'} />
              </div>
              <p>Rapid development of large IT systems</p>
            </div>

            <div class='flex gap-4 items-center'>
              <div class='bg-gray-800 w-6 h-6 shrink-0 border border-juxt'>
                <TickIcon className={'fill-white'} />
              </div>
              <p>Increased levels of agility and software re-use</p>
            </div>
            <div class='flex gap-4 items-center'>
              <div class='bg-gray-800 w-6 h-6 shrink-0 border border-juxt'>
                <TickIcon className={'fill-white'} />
              </div>
              <p>Lower maintenance costs</p>
            </div>
            <div class='flex gap-4 items-center'>
              <div class='bg-gray-800 w-6 h-6 shrink-0 border border-juxt'>
                <TickIcon className={'fill-white'} />
              </div>
              <p>Secure, reliable systems that are robust yet flexible</p>
            </div>
          </div>
        </div>
      </div>
    </Section>
    <Section className={'bg-white py-20 text-black'}>
      <div class='flex justify-between flex-col lg:flex-row'>
        <div class='lg:w-1/2'>
          <h2 class='text-6xl lg:text-7xl font-semibold pb-10 uppercase'>
            Time
          </h2>
          <div class='font-extralight flex flex-col gap-6'>
            <p class=''>
              We believe that systems should be built on the conceptual bedrock
              of a dual timeline. This provides a universal set of essential
              capabilities for organisations who operate within disparate and
              ever-evolving landscapes of information, and who require an
              accurate and consistent view of information at any point:
              <span class='italic'>past</span>,
              <span class='italic'>present</span> and
              <span class='italic'>future</span>.
            </p>
            <p>The main timeline is fully controllable and it allows for:</p>
            <div>
              <div class='flex items-center'>
                <div class='w-8 h-8 shrink-0'>
                  <ChevronRightIcon className={'fill-black'} />
                </div>
                <p>Historical corrections</p>
              </div>
              <div class='flex items-center'>
                <div class='w-8 h-8 shrink-0'>
                  <ChevronRightIcon className={'fill-black'} />
                </div>
                <p>The integration of imported records</p>
              </div>
              <div class='flex items-center'>
                <div class='w-8 h-8 shrink-0'>
                  <ChevronRightIcon className={'fill-black'} />
                </div>
                <p>The previewable orchestration of future states</p>
              </div>
            </div>
            <p>
              The secondary timeline is immutable and provides a guaranteed
              audit trail, 'built-in'.
            </p>
          </div>
        </div>
        <div
          class='lg:w-1/2 lg:self-center flex justify-center lg:justify-end overflow-hidden'
        >
          <Image
            alt='image'
            width={500}
            quality={80}
            class='sm:w-4/5 lg:w-11/12 animate-[spin_100s_linear_infinite]'
            src={import('../assets/site/sphere-time.png')}
          />
        </div>
      </div>
    </Section>
    <Section className={'bg-black py-20'}>
      <div class='flex justify-between flex-col-reverse lg:flex-row text-white'>
        <div
          class='lg:w-1/2 lg:self-center flex justify-center lg:justify-start overflow-hidden'
        >
          <Image
            alt='image'
            width={500}
            quality={80}
            class='sm:w-4/5 lg:w-11/12 animate-[spin_100s_linear_infinite]'
            src={import('../assets/site/sphere-data.png')}
          />
        </div>
        <div class='lg:w-1/2'>
          <h2 class='text-6xl lg:text-7xl font-semibold pb-10 uppercase'>
            Data
          </h2>
          <div class='font-extralight flex flex-col gap-6'>
            <p>
              Data is fundamental to the creation of software. It will routinely
              outlive the interpretations we derive from it and the applications
              we build on top of it. Therefore, we will always seek to lay the
              foundations of data management independently of a particular
              application or use-case, and above a
              <span class='italic'>common timeline</span>.
            </p>
            <p>
              Table-based structures, found in spreadsheets and traditional SQL
              databases, are helpful for displaying and analysing data, but they
              are not an appropriate format for storing data.
            </p>
            <p>
              Tables are insufficient for representing data in its purest form,
              and this is particularly obvious when modelling sparse data or
              multi-valued attributes, or coping with the evolution of data over
              time.
            </p>
            <p>
              Instead, we believe that data is best recorded as units of facts
              and relationships, without constraints.
            </p>
            <p>
              More simply put, we believe graph-oriented systems point us
              towards the correct approach for data management, and
              organisations such as
              <span class='font-bold text-juxt'>Facebook</span> and
              <span class='font-bold text-juxt'>Google</span> have proved how powerful
              the widespread use of graph-structured data can be.
            </p>
          </div>
        </div>
      </div>
    </Section>
    <Section className={'bg-white py-20 text-black'}>
      <div class='flex justify-between flex-col lg:flex-row'>
        <div class='lg:w-1/2'>
          <h2 class='text-6xl lg:text-7xl font-semibold pb-10 uppercase'>
            Form
          </h2>
          <div class='font-extralight flex flex-col gap-6'>
            <p>
              Organisations can unlock different amounts of value from data
              depending on how they interpret it, how they shape it and the
              constraints they place on it.
            </p>
            <p>
              Complex
              <span class='italic'>
                types & tables, schemas & structures, classes & containers,
                models & metadata, formats & encodings, representations.
              </span>
            </p>
            <p>
              These are the <span class='font-bold text-juxt'>forms</span> we construct
              for interpreting, analysing and extracting value from our data. Tools
              such as relational schemas and ontologies are common structures we
              use for understanding, analysing and managing our information.
            </p>
            <p>
              Too often, software developers will attempt to "codify" these
              structures into their software as types and objects.
            </p>
            <p>
              By understanding that schema is just another form of data, on a
              timeline, we let our information systems grow and flex with the
              businesses they serve. This is how we are able to build
              maintainable models of the real world.
            </p>
          </div>
        </div>
        <div
          class='lg:w-1/2 lg:self-center flex justify-center lg:justify-end overflow-hidden'
        >
          <Image
            alt='image'
            width={500}
            quality={80}
            class='sm:w-4/5 lg:w-11/12 animate-[spin_100s_linear_infinite]'
            src={import('../assets/site/sphere-form.png')}
          />
        </div>
      </div>
    </Section>
    <Section className={'bg-black py-20'}>
      <div class='flex justify-between flex-col-reverse lg:flex-row text-white'>
        <div
          class='lg:w-1/2 lg:self-center flex justify-center lg:justify-start relative'
        >
          <Image
            alt='image'
            width={500}
            quality={80}
            class='sm:w-4/5 lg:w-10/12 animate-[spin_100s_linear_infinite]'
            src={import('../assets/site/sphere-code.png')}
          />
          <Image
            alt='image'
            width={500}
            quality={80}
            class='sm:w-4/5 lg:w-10/12 absolute top-0 left-1/2 lg:left-0 transform lg:translate-x-0 -translate-x-1/2'
            src={import('../assets/site/sphere-form.png')}
          />
        </div>
        <div class='lg:w-1/2 pb-16'>
          <h2 class='text-6xl lg:text-7xl font-semibold pb-10 uppercase'>
            Code
          </h2>
          <div class='font-extralight flex flex-col gap-6'>
            <p>
              The software <span class='italic'>patterns</span> and
              <span class='italic'>practices</span> that underlie your application
              architecture are certainly important, but less fundamentally relevant
              than making the correct choices with regards to the structure of your
              data in time. Assuming those other foundations are in place, we believe
              that the best approach to code is to keep it
              <span class='italic'>short, readable</span> and
              <span class='italic'>expressive</span>.
            </p>
            <p>In reality this means we prefer:</p>
            <div>
              <div class='flex items-center'>
                <div class='w-8 h-8 shrink-0'>
                  <ChevronRightIcon className={'fill-white'} />
                </div>
                <p>
                  Writing modular & generic libraries of functions that operate
                  over many types of data structures
                </p>
              </div>
              <div class='flex items-center'>
                <div class='w-8 h-8 shrink-0'>
                  <ChevronRightIcon className={'fill-white'} />
                </div>
                <p>Minimising the use of state wherever possible</p>
              </div>
              <div class='flex items-center'>
                <div class='w-8 h-8 shrink-0'>
                  <ChevronRightIcon className={'fill-white'} />
                </div>
                <p>
                  Maintaining declarative structures that avoid the need for
                  reasoning about imperative control flows
                </p>
              </div>
            </div>
            <p>
              By pulling out the state and domain, the remaining code is simple.
              Developers can focus on writing code to implement business
              <span class='italic'>logic</span>, pure functional
              <span class='italic'>calculations</span> and
              <span class='italic'>derivations</span>, with resulting
              <span class='italic'>actions</span> that automate the execution of
              business processes.
            </p>
            <p>As software complexity is tamed, productivity soars.</p>
          </div>
        </div>
      </div>
    </Section>
    <Section className={'bg-white py-20 text-black'}>
      <div>
        <div class='lg:w-2/3'>
          <h2 class='text-4xl pb-10 font-bold'>Enabling Technologies</h2>
          <h3 class='text-xl font-extralight pb-14 lg:pb-20'>
            We select and develop particular tools and technologies that compose
            harmoniously, chosen to support our methodology.
          </h3>
        </div>
      </div>

      <div class='flex flex-col gap-24'>
        <div
          class='flex justify-center gap-14 items-center md:items-start lg:items-center flex-col-reverse lg:flex-row'
        >
          <div class='w-full h-96'>
            <Image
              alt='image'
              width={500}
              quality={80}
              class='w-full h-full object-cover'
              src={import('../assets/site/tech-talking.jpg')}
            />
          </div>
          <div class='lg:w-1/2 shrink-0'>
            <h2 class='text-4xl font-semibold pb-10'>XTDB</h2>
            <div class='font-extralight flex flex-col gap-6'>
              <p>XTDB is our unbundled bitemporal graph database:</p>
              <div>
                <div class='flex items-center'>
                  <div class='w-8 h-8 shrink-0'>
                    <ChevronRightIcon className={'fill-black'} />
                  </div>
                  <p>Transactional consistency</p>
                </div>
                <div class='flex items-center'>
                  <div class='w-8 h-8 shrink-0'>
                    <ChevronRightIcon className={'fill-black'} />
                  </div>
                  <p>Query with Datalog, EQL, or SQL</p>
                </div>
                <div class='flex items-center'>
                  <div class='w-8 h-8 shrink-0'>
                    <ChevronRightIcon className={'fill-black'} />
                  </div>
                  <p>
                    Pluggable backends include PostgreSQL, Kafka, RocksDB and
                    many more
                  </p>
                </div>
              </div>
              <p>
                XTDB provides the data 'time-line' as a value, storing both
                'valid' time and 'transaction' time. Queries that are often
                impossible in other databases are made simple in XTDB.
              </p>
              <Clickable>
                <a href='https://xtdb.com/' target='_blank'>
                  See more at xtdb.com
                </a>
              </Clickable>
            </div>
          </div>
        </div>

        <div
          class='flex justify-center items-center md:items-start lg:items-center gap-14 flex-col-reverse lg:flex-row-reverse'
        >
          <div class='w-full h-96'>
            <Image
              alt='image'
              width={500}
              quality={100}
              class='w-full h-full object-cover'
              src={import('../assets/site/funding-circle-mal.webp')}
            />
          </div>
          <div class='lg:w-1/2 shrink-0'>
            <h2 class='text-4xl font-semibold pb-10'>Clojure</h2>
            <div class='font-extralight flex flex-col gap-6'>
              <p>
                Many object-oriented programming languages coax the developer
                into coupling code with data.
              </p>
              <p>
                Functional programming languages pull them apart. Our go-to
                functional programming language  — Clojure — goes further,
                providing language features to protect simplicity.
              </p>
            </div>
          </div>
        </div>

        <div
          class='flex justify-center gap-14 items-center md:items-start lg:items-center flex-col-reverse lg:flex-row'
        >
          <div class='w-full h-96'>
            <Image
              alt='image'
              width={500}
              quality={80}
              class='w-full h-full object-cover'
              src={import('../assets/site/mal-teaching.jpeg')}
            />
          </div>
          <div class='lg:w-1/2 shrink-0'>
            <h2 class='text-4xl font-semibold pb-10'>Agile</h2>
            <div class='font-extralight flex flex-col gap-6'>
              <p>
                JUXT's leadership is made up of experienced software consultants
                who have led Agile projects, run Agile training courses and
                brought Agile methodologies into large organisations.
              </p>
              <p>
                We have taken the best parts of Agile methodologies and combined
                them into a process that scales and delivers. We deploy often,
                provide regular showcases and encourage daily stand-ups. We use
                best-of-breed tools to provide transparency and to manage
                project work-streams.
              </p>
            </div>
          </div>
        </div>

        <div
          class='flex justify-center items-center md:items-start lg:items-center gap-14 flex-col-reverse lg:flex-row-reverse'
        >
          <div class='w-full h-96'>
            <Image
              alt='image'
              width={500}
              quality={80}
              class='w-full h-full object-cover'
              src={import('../assets/site/funding-circle-jon.jpeg')}
            />
          </div>
          <div class='lg:w-1/2 shrink-0'>
            <h2 class='text-4xl font-semibold pb-10'>Cloud</h2>
            <div class='font-extralight flex flex-col gap-6'>
              <p>
                We’ve been building systems on AWS since early 2014, over that
                time we’ve accumulated first-hand knowledge and expertise of
                managing and automating AWS infrastructure.
              </p>
              <p>
                Our AWS systems have been successfully audited for PCI DSS
                compliance and won praise for their operational stability,
                information security and regulatory compliance. We have
                experience in meeting GDPR requirements and protecting data
                privacy.
              </p>
              <Image
                alt='image'
                width={500}
                quality={100}
                class='w-full sm:max-w-md'
                alt='aws, google cloud, heroku'
                src={import('../assets/site/cloud-provider-logos.png')}
              />
            </div>
          </div>
        </div>
      </div>
    </Section>
  </main>
</Layout>
